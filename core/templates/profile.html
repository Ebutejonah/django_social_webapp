{%extends 'base.html'%}
{%load static%}
{%block content%}
<div class="bg-black h-full">
    <div class="bg-gray-900 max-w-4xl mx-auto py-10 px-4">
        <div class="flex justify-between pb-3">
            <span>
                <a href="/">
                    <p class="text-white p-2 border-2 border-gray-300 rounded-full text-center bg-blue-600 hover:border-white duration-500 hover:bg-blue-600">Home</p>
                </a>
            </span>
            <span>
                <p class="font-semibold uppercase text-2xl text-white">{{user_profile.name_last}}&nbsp;&nbsp;{{user_profile.name_first}}</p>
                <p class="text-gray-300 text-center">@{{user_profile.user.username}}</p>   
            </span>
            <span>
                {%if user_profile.user.username == request.user.username%}
                    <a href="{%url 'core:settings'%}" class="text-white flex p-2 items-center px-2 border-2 rounded-full bg-blue-600 hover:bg-blue-600 duration-500">Edit Profile</a>
                {%else%}
                    <a href="/follow?username={{user_profile.user.username}}">
                        {%if is_following%}
                            <p class="text-white flex p-2 items-center px-2 border-2 rounded-full bg-red-400 hover:bg-red-500 duration-500">
                                Unfollow
                            </p>
                        {%else%}
                            <p class="text-white flex p-2 items-center px-2 border-2 rounded-full bg-blue-500 hover:bg-blue-600 duration-500">
                                Follow
                            </p>
                        {%endif%}
                        </a>
                {%endif%}
            </span>    
        </div>
        <div>
            <a href="{{user_profile.background_profile_pics.url}}">
                <img src="{{user_profile.background_profile_pics.url}}" class="rounded-lg object-cover w-full h-80" alt="Background Image">
            </a>
            <div class="text-black text-2xl ml-2 -mt-16 justify-between bg-white p-2 rounded-md absolute">
                <span class="pl-4 text-gray-500 hover:text-black">{{user_post_length}} 
                    {%if user_post_length == 0 %}
                        Posts
                    {%elif user_post_length == 1%}
                        Post
                    {%else%}
                        Posts
                    {%endif%}
                </span>
                <a href="followers?username={{user_profile.user.username}}">
                    <span class="pl-4 text-gray-500 hover:text-black">{{followers}} 
                        {%if followers == 0 %}
                            Followers
                        {%elif followers == 1%}
                            Follower
                        {%else%}
                            Followers
                        {%endif%}
                    </span>
                </a>
                <a href="following?username={{user_profile.user.username}}"><span class="pl-4 pr-4 text-gray-500 hover:text-black">Following {{following}}</span></a>
            </div>
        </div>
        <div class ="flex justify-end -mt-16">
            <div>
                <a href="{{user_profile.profile_pics.url}}">
                    <img src="{{user_profile.profile_pics.url}}" class="profile_img mr-3 w-32 h-32 border-2 border-gray-600" alt="Profile Image">
                </a>
            </div>   
        </div>  
        <div class="border-y-2 border-gray-400 mb-5 mt-10">
            <p class="font-semibold text-gray-300 flex justify-center mt-10 text-xl">BIO</p>
            <div class="text-white rounded-lg max-w-4xl break-all my-5 p-3 flex justify-center"> 
                {{user_profile.bio}}
            </div>
            <span><i class="mt-8 fa-solid fa-location-dot mb-2 text-blue-600"></i></span>
            <span class="text-white mb-2 w-20 font-semibold align-text-bottom mt-3 py-1 px-3 h-10">{{user_profile.continent}}, {{user_profile.country}}</span>
        </div> 
        {%if user_profile.user.username == request.user.username%} 
            {%if post%}
                <p class="font-bold mt-10 flex justify-center text-gray-300">All Posts By You</p>   
            {%else%}
                <p class="font-bold mt-20 flex justify-center text-gray-300 mb-40">All posts you share will appear on your profile.</p>
            {%endif%}
        {%else%}
            {%if post%}
                <p class="font-bold mt-10 flex justify-center text-gray-300">All Posts By @{{user_profile.user.username}}</p>
            {%else%}
                <p class="font-bold mt-20 flex justify-center text-gray-300 mb-40">@{{user_profile.user.username}} has no post</p>
            {%endif%}
        {%endif%}
        {%for post in post reversed%}
            <div class="postdiv mb-10 mt-10 overflow-hidden bg-gray-100 rounded-md" id="">
                <div class="flex justify-between mb-3">
                    <p class="p-3 font-semibold cursor-pointer hover:underline">@{{user_profile.user.username}}</p>
                    <div class="block mr-5">
                        <div class="flex justify-center">
                            <i id="" class="postoption fa-solid fa-ellipsis p-2 mt-2 cursor-pointer hover: border-gray-200 hover:rounded-full hover:bg-gray-200 duration-500"></i>
                        </div>
                        <div id ="" class="deletepost opacity-0 cursor-pointer">
                            <i class="fa-solid fa-trash pt-1 text-red-500"></i><span class="lowercase text-red-500 pl-2">Delete</span>
                        </div>
                    </div>    
                </div>
                {%if post.post_file%}
                    <a href="{{post.post_file.url}}">
                        {%if '.mp4' in post.post_file.url%}
                            <video controls src="{{post.post_file.url}}" class="cursor-zoom-in"></video>
                        {%else%}
                        <div class="flex justify-center">
                            <img src="{{post.post_file.url}}" class="cursor-zoom-in" alt="Post Image">
                        </div>    
                        {%endif%}
                    </a>
                {%endif%}
                <div class="p-4">
                    <p>{{post.caption}}</p>
                    <p>{{post.likes}} 
                        {%if post.likes == 0%}
                            likes
                        {% elif post.likes == 1%}
                            like
                        {%else%}
                            likes
                        {%endif%}
                    </p>
                    <p>{{post.time_of_post}}</p>
                </div>
            </div>
            <hr>
        {%endfor%}
    </div>
    {%include 'partials/footnote.html'%}
</div>



{%endblock%}