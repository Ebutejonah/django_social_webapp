{%extends 'base.html'%}
{%load static%}
{%block content%}
<div class="bg-black">
    <div class="post_id flex justify-center mx-auto bg-gray-100 dark:bg-gray-900 max-w-6xl">
        <div class="text-2xl">
            {%include 'partials/navbar.html'%}
        </div>
        <div class = "container max-w-xl border-x-2 px-2 rounded-md border-gray-200 dark:border-gray-700"> 
            <a href="{% url 'core:profile' username=user_object.username %}">
                <p class="text-blue-600 text-4xl font-bold p-4 cursor-pointer">@{{user_profile.user.username}}</p>
                <img src="{{user_profile.profile_pics.url}}" class="w-32 h-32 items-center mx-auto profile_img"alt="Image">
            </a>
            {%if posts%}
                <div id="post_id">
                    {%include 'partials/post.html'%}
                </div>
            {%else%}
                <p class="dark:text-gray-300 text-black text-2xl text-center font-semibold mt-32 px-2 pb-4">Welcome to <span class="text-blue-600 italic">Social Book</span> &nbsp;<i class="fa-solid fa-users text-blue-600 p-4 bg-gray-100 rounded-full"></i></p>
                <p class="dark:text-gray-400 text-black text-center font-semibold text-xl px-2">Posts you upload and those of accounts you follow will be displayed here.</p>
            {%endif%}    
        </div>
        <div>
            <div class="mr-8 rounded-md px-2">
                <form action="" id="post_button" method="POST" enctype="multipart/form-data">{%csrf_token%}
                    <textarea id="caption" type="text" autocomplete="off" class="resize-none mt-2 w-96 h-36 border-2 pl-2 rounded-md" name="caption" placeholder="What's on your mind?"></textarea>
                    <input id="postimage" type="file" autocomplete="off" class="cursor-pointer text-black bg-gray-100 rounded-md font-normal" name="postimage">
                    <div class="flex justify-between mt-5">
                        <p id="cancelbutton" class="text-black border-2 border-gray-500 rounded-full px-2 bg-gray-100 cursor-pointer hover:bg-red-400 duration-300 hover:text-white">Cancel</p>
                        <input disabled id="post" type="submit" class="rounded-full border-2 cursor-pointer border-gray-500 px-2 text-black bg-gray-100" value="Post">   
                    </div>
                </form>    
            </div>
            <div>
                <p class="dark:text-gray-200 text-gray-900 px-2 py-4 font-semibold border-t-2 border-gray-200 mt-5 dark:border-gray-700">Suggested For You</p>
                {%for other_profile in other_profiles%}
                    <div class="flex justify-between bg-gray-100 dark:bg-gray-800  m-7 p-4 rounded-md">
                        <a href="{% url 'core:profile' username=other_profile.user.username %}">
                            <div>
                                <p class="text-black dark:text-gray-200 pl-2 pb-2 font-semibold">@{{other_profile.user.username}}</p>
                                <img src="{{other_profile.profile_pics.url}}" class="profile_img w-24 h-24" alt="">
                            </div>
                        </a>
                        <span>
                            <form action="" method="POST">{%csrf_token%}
                                <a href="{% url 'core:profile' username=other_profile.user.username %}" name="username">
                                    <p class="bg-blue-600 text-white p-3 rounded-full cursor-pointer hover:bg-blue-500 duration-500">
                                        View Profile
                                    </p>
                                </a>
                            </form>    
                        </span>
                    </div>    
                {%endfor%}
            </div>    
        </div>
    </div>
    
</div>

{%include 'partials/footnote.html'%}
{%endblock%}

<!--PREVENT RELOAD ON SUBMITTING FORM
<!DOCTYPE html>
<html>
<head>
    <title>Todo List</title>
</head>
<body>
    <form method="post"id="task-form">
        {% csrf_token %}
        <input type="text"placeholder="Enter Task"name="task"id="task"required>
        <button type="submit">Save</button>
    </form>
    <script src="https://code.jquery.com/jquery-3.5.1.js"
        integrity="sha256-QWo7LDvxbWT2tbbQ97B53yJnYU3WhH/C8ycbRAkjPDc="
        crossorigin="anonymous">
    </script>
    <script type="text/javascript">
    $(document).on('submit', '#task-form',function(e){
        e.preventDefault();
        $.ajax({
            type:'POST',
            url:'{% url "home"%}',
            data:
            {
                task:$("#task").val(),
                csrfmiddlewaretoken:$('input[name=csrfmiddlewaretoken]').val()
            },
            success:function(){
                  alert('Saved');
                    }
            })
        });
    </script>  
</body>
</html>-->
